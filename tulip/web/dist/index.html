<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"> 
    <script src="https://cdn.jsdelivr.net/npm/webmidi@latest/dist/iife/webmidi.iife.js"></script>
    <script src="micropython.mjs" type="module"></script>
    <script type="text/javascript" src="enable-threads.js"></script>
    <script type="text/javascript" src="amy.js"></script>
    <script type="text/javascript" src="spss.js"></script>
  </head>
  <body>
    <script type="module">

      // Tulip settings
      mp = await loadMicroPython({
        stdout:null, 
        linebuffer: false,
        pystack: 32 * 1024, 
        heapsize: 2 * 1024 * 1024
      });

      // Tell MP to start serving a REPL
      await mp.replInit();
    </script>
    <div class="container-lg my-2 px-2">
      <h1><A HREF="https://github.com/shorepine/tulipcc">Tulip</A> Web</h1>
      <!-- Tulip's SDL canvas -->
      <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
      <form name="tulip_settings">
        <div class="row align-items-start">
          <div class="col-4 align-self-start">
            MIDI input: 
            <select onchange="setup_midi_devices()" name="midi_input" class="form-select form-select-sm" aria-label=".form-select-sm example">
              <option selected>[Not available]</option>
            </select>
          </div>
          <div class="col-4 align-self-start">
            MIDI output: 
            <select onchange="setup_midi_devices()" name="midi_output" class="form-select form-select-sm" aria-label=".form-select-sm example">
              <option selected>[Not available]</option>
            </select>
          </div>
          <div class="col-3 align-self-start">
            <button type="button" onclick="restart_tulip()" class="btn btn-warning">Restart Tulip</button>
            <button type="button" onclick="clear_storage()" class="btn btn-danger">Clear Storage</button>
          </div>
        </div>
      </form>

      <script language="javascript">        
        // On click anywhere, start audio
        document.body.addEventListener('click', start_audio, true); 
      </script>
    </div>

  </body>
</html>


